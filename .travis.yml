language: python

python:
  - "3.6"

branches:
  only:
    - master

# creating conda environment:
before_install:
    #install miniconda
    - wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
    - chmod +x miniconda.sh
    - ./miniconda.sh -b -p "$PWD/miniconda/"
    - export PATH="$PWD/miniconda/bin/:$PATH"
    - yes|conda update conda>/dev/null


# set up enviroment
install:
  # Source conda environment:
  - yes|conda env create -f environment.yml>/dev/null
  - source activate deepchembed
  # install coverage
  - pip install coverage
  - pip install python-coveralls

script: 
  - source activate deepchembed
  - pytest

# generate a coverage report to send to back to user
after_success:
  - coveralls
